<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Convert Dates of Individual Case Reports into a
  Time Series of Counts — linelist2sts • surveillance</title>
<script src="../deps/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.4/tabs.js"></script><script src="../deps/bs3compat-0.2.4/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css">
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../syntax-highlighting.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Convert Dates of Individual Case Reports into a
  Time Series of Counts — linelist2sts">
<meta property="og:description" content="The function is used to convert an individual line list of cases to an
  aggregated time series of counts based on event date information of the cases.">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@bastistician">
<meta name="twitter:site" content="@bastistician">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">surveillance</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">1.19.1</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3">
<li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/overview.html">Overview</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/events.html">Events</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/bibliography.html">Bibliography</a>
</li>
      </ul>
<ul class="navbar-nav ml-1"></ul>
</div>
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <div class="col-md-9 contents">
    <img src="" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
    <h1 class="display-4">Convert Dates of Individual Case Reports into a
  Time Series of Counts</h1>
    
    <div class="d-none name"><code>linelist2sts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function is used to convert an individual line list of cases to an
  aggregated time series of counts based on event date information of the cases.</p>
    </div>

    <pre class="usage"><code class="sourceCode R"><span class="fu">linelist2sts</span><span class="op">(</span><span class="va">linelist</span>,<span class="va">dateCol</span>,
              aggregate.by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1 day"</span>, <span class="st">"1 week"</span>, <span class="st">"7 day"</span>, <span class="st">"1 week"</span>,
<span class="st">"1 month"</span>,  <span class="st">"3 month"</span>, <span class="st">"1 year"</span><span class="op">)</span>,
              dRange<span class="op">=</span><span class="cn">NULL</span>,
              epochInPeriodStr<span class="op">=</span><span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">aggregate.by</span>, <span class="st">"1 day"</span><span class="op">=</span><span class="st">"1"</span>,
<span class="st">"1 week"</span><span class="op">=</span><span class="st">"%u"</span>, <span class="st">"1 month"</span><span class="op">=</span><span class="st">"%d"</span>,<span class="st">"3 month"</span><span class="op">=</span><span class="st">"%q"</span>,<span class="st">"1 year"</span><span class="op">=</span><span class="st">"%j"</span><span class="op">)</span>,
              startYearFormat<span class="op">=</span><span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">aggregate.by</span>,<span class="st">"1 day"</span><span class="op">=</span><span class="st">"%Y"</span>,
<span class="st">"7 day"</span><span class="op">=</span><span class="st">"%G"</span>, <span class="st">"1 week"</span><span class="op">=</span><span class="st">"%G"</span>,<span class="st">"1 month"</span><span class="op">=</span><span class="st">"%Y"</span>,<span class="st">"3 month"</span><span class="op">=</span><span class="st">"%Y"</span>,<span class="st">"1 year"</span><span class="op">=</span><span class="st">"%Y"</span><span class="op">)</span>,
              startEpochFormat<span class="op">=</span><span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">aggregate.by</span>,<span class="st">"1 day"</span><span class="op">=</span><span class="st">"%j"</span>,
<span class="st">"7 day"</span><span class="op">=</span><span class="st">"%V"</span>, <span class="st">"1 week"</span><span class="op">=</span><span class="st">"%V"</span>, <span class="st">"1 month"</span><span class="op">=</span><span class="st">"%m"</span>, <span class="st">"3 month"</span><span class="op">=</span><span class="st">"%Q"</span>, <span class="st">"1 year"</span><span class="op">=</span><span class="st">"1"</span><span class="op">)</span>
<span class="op">)</span></code></pre>

    <h2>Arguments</h2>
    <dl class="row" id="ref-arguments">
<dt class="col-sm-3" id="ref-arguments name">linelist</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>A <code>data.frame</code> containing the line list of cases.</p></dd>
    <dt class="col-sm-3" id="ref-arguments name">dateCol</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>A character string stating the column name in
    <code>linelist</code> which contains the event occurrence information (as a
    vector of <code>Date</code>s) which are to be temporally aggregated.</p></dd>
    <dt class="col-sm-3" id="ref-arguments name">aggregate.by</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Temporal aggregation level given as a string, see
  the <code>by</code> variable of the <code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></code> function for
  further details.</p></dd>
    <dt class="col-sm-3" id="ref-arguments name">dRange</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>A vector containing the minimum and maximum date
    for doing the aggregation. If not specified these dates are
    extracted automatically by taking <code><a href="https://rdrr.io/r/base/range.html">range(D[,dateCol])</a></code> and
    adjust these according to <code>aggregate.by</code> (e.g. always first of
    a month).</p></dd>
    <dt class="col-sm-3" id="ref-arguments name">epochInPeriodStr</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p><code>strptime</code> compatible format string to use for
    determining how a date is placed within the epoch. This is, e.g.,
    used to move the <code>dRange</code> epochs to the beginning of the
    period. Example: In case of weekly aggregation the "%u" determines
    which day within the week (Monday is day 1) we have. See
    <code><a href="https://rdrr.io/r/base/strptime.html">strptime</a></code> for further details.</p></dd>
    <dt class="col-sm-3" id="ref-arguments name">startYearFormat</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p><code>strptime</code> compatible format string to use for
    determining how the <code>start</code> entry of the <code>sts</code> object is
    generated. Usually the provided defaults are sufficient.</p></dd>
    <dt class="col-sm-3" id="ref-arguments name">startEpochFormat</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p><code>strptime</code> compatible format string to use for
    determining how the <code>start</code> entry of the <code>sts</code> object is
    generated. Usually the provided defaults are sufficient.</p></dd>
    </dl>
<h2 class="hasAnchor" id="details">
<a class="anchor" href="#details"></a>Details</h2>

    <p>The date range is automatically extended such that the starting and
  ending dates are always the first epoch within the period, i.e. for
  aggregation by week it is moved to Mondays. This is controlled by the
  <code>epochInPeriodStr</code> parameter.</p>
<p>Please note that the formatting strings are implemented by the
  <code><a href="formatDate.html">formatDate</a></code> function, which uses <code><a href="https://rdrr.io/r/base/strptime.html">strptime</a></code>
  formatting strings as well as
  formatting of quarters via "%Q", "%OQ" and "%q".</p>
    <h2 class="hasAnchor" id="value">
<a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns an object of class <code>"<a href="sts-class.html">sts</a>"</code>.
  The <code>freq</code> slot might not be appropriate.</p>
    <h2 class="hasAnchor" id="author">
<a class="anchor" href="#author"></a>Author</h2>

    <p>Michael Höhle</p>
    <h2 class="hasAnchor" id="see-also">
<a class="anchor" href="#see-also"></a>See also</h2>

    <div class="dont-index"><p><code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></code>, <code><a href="https://rdrr.io/r/base/strptime.html">strptime</a></code>, <code><a href="formatDate.html">formatDate</a></code></p></div>

    <h2 class="hasAnchor" id="examples">
<a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class="sourceCode R"><span class="co">#Load O104 outbreak data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"husO104Hosp"</span><span class="op">)</span>

<span class="co">#Convert line list to an sts object</span>
<span class="va">sts</span> <span class="op">&lt;-</span> <span class="fu">linelist2sts</span><span class="op">(</span><span class="va">husO104Hosp</span>, dateCol<span class="op">=</span><span class="st">"dHosp"</span>, aggregate.by<span class="op">=</span><span class="st">"1 day"</span><span class="op">)</span>

<span class="co">#Check that the number of cases is correct</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="stsSlots.html">observed</a></span><span class="op">(</span><span class="va">sts</span><span class="op">)</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">husO104Hosp</span><span class="op">)</span><span class="op">)</span>

<span class="co">#Plot the result</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">sts</span>,xaxis.tickFreq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"%d"</span><span class="op">=</span><span class="va">atChange</span>,<span class="st">"%m"</span><span class="op">=</span><span class="va">atChange</span><span class="op">)</span>,
           xaxis.labelFreq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"%d"</span><span class="op">=</span><span class="va">at2ndChange</span><span class="op">)</span>,
           xaxis.labelFormat<span class="op">=</span><span class="st">"%d %b"</span>,
           xlab<span class="op">=</span><span class="st">""</span>,las<span class="op">=</span><span class="fl">2</span>,cex.axis<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span>
</code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="sticky-top">
    <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>

    </nav>
</div>
  </div>
</div>


      <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Maintained by <a href="http://www.imbe.med.uni-erlangen.de/cms/sebastian_meyer.html" class="external-link">Sebastian Meyer</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001. Hosted on <a href="https://R-forge.R-project.org/projects/surveillance/" class="external-link"><img src="https://r-forge.r-project.org/themes/rforge/imagesrf/logo.png" height="18" alt="R-Forge"></a></p>
</div>

      </footer>
</div>

  


  

  </body>
</html>

