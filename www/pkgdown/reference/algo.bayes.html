<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>The Bayes System — algo.bayes • surveillance</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The Bayes System — algo.bayes"><meta name="description" content="Evaluation of timepoints with the Bayes subsystem
        1, 2, 3 or a self defined Bayes subsystem."><meta property="og:description" content="Evaluation of timepoints with the Bayes subsystem
        1, 2, 3 or a self defined Bayes subsystem."><!-- For Rd equations in pkgdown 2.1.0, see https://katex.org/docs/autorender.html --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script><script>
  document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
          throwOnError: false,
          macros: {"\\code": "\\texttt"}
      })
  });
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">surveillance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.25.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pkgdown/overview.html">Overview</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/pkgdown/events.html">Events</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/pkgdown/bibliography.html">Bibliography</a></li>
      </ul><ul class="navbar-nav"></ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>The Bayes System</h1>

      <div class="d-none name"><code>algo.bayes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Evaluation of timepoints with the Bayes subsystem
        1, 2, 3 or a self defined Bayes subsystem.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">algo.bayesLatestTimepoint</span><span class="op">(</span><span class="va">disProgObj</span>, timePoint <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>       control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">0</span>, w <span class="op">=</span> <span class="fl">6</span>, actY <span class="op">=</span> <span class="cn">TRUE</span>,alpha<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">algo.bayes</span><span class="op">(</span><span class="va">disProgObj</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="va">range</span>,</span>
<span>       b <span class="op">=</span> <span class="fl">0</span>, w <span class="op">=</span> <span class="fl">6</span>, actY <span class="op">=</span> <span class="cn">TRUE</span>,alpha<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">algo.bayes1</span><span class="op">(</span><span class="va">disProgObj</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="va">range</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">algo.bayes2</span><span class="op">(</span><span class="va">disProgObj</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="va">range</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">algo.bayes3</span><span class="op">(</span><span class="va">disProgObj</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="va">range</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-disprogobj">disProgObj<a class="anchor" aria-label="anchor" href="#arg-disprogobj"></a></dt>
<dd><p>object of class disProg (including the observed and the state chain)</p></dd>

        <dt id="arg-timepoint">timePoint<a class="anchor" aria-label="anchor" href="#arg-timepoint"></a></dt>
<dd><p>time point which should be evaluated in
	  <code>algo.bayes LatestTimepoint</code>. The
                default is to use the latest timepoint</p></dd>

        <dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>control object: <code>range</code> determines the desired
                timepoints which should be evaluated, <code>b</code> describes the number of years to go
                back for the reference values, <code>w</code> is the half window width for the reference
                values around the appropriate timepoint and <code>actY</code> is a boolean to decide if
                the year of <code>timePoint</code> also contributes <code>w</code> reference values. The parameter <code>alpha</code> is the \((1-\alpha)\)-quantile to use in order to calculate the upper threshold.
                As default <code>b</code>, <code>w</code>, <code>actY</code> are set for the Bayes 1 system with <code>alpha</code>=0.05.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>


<dl><dt>survRes</dt>
<dd><p><code>algo.bayesLatestTimepoint</code> returns a list of class <code>survRes</code> (surveillance result), which
    includes the alarm value for recognizing an
    outbreak (1 for alarm, 0 for no alarm), the threshold value for recognizing the alarm and
    the input object of class disProg.
    <code>algo.bayes</code> gives a list of class <code>survRes</code> which includes the vector
    of alarm values for every timepoint in <code>range</code> and the vector of threshold values
    for every timepoint in <code>range</code> for the system specified by <code>b</code>, <code>w</code> and
    <code>actY</code>, the range and the input object of class disProg.
    <code>algo.bayes1</code> returns the same for the Bayes 1 system, <code>algo.bayes2</code>
    for the Bayes 2 system and <code>algo.bayes3</code> for the Bayes 3 system.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Using the reference values the \((1-\alpha)\cdot
    100\%\) quantile of the
  predictive posterior distribution is calculated as a threshold.
  An alarm is given if the actual value is bigger or equal than this threshold.
  It is possible to show using analytical computations that the predictive
  posterior in this case is the negative
  binomial distribution. Note: <code>algo.rki</code> or <code>algo.farrington</code>
  use two-sided prediction intervals – if one wants to compare with
  these procedures it is necessary to use an alpha, which is half the
  one used for these procedures.</p>
<p>Note also that <code>algo.bayes</code> calls
  <code>algo.bayesLatestTimepoint</code> for the values specified in
  <code>range</code> and for the system specified in <code>control</code>.
  <code>algo.bayes1</code>, <code>algo.bayes2</code>, <code>algo.bayes3</code> call
  <code>algo.bayesLatestTimepoint</code> for the values specified in
  <code>range</code> for the Bayes 1 system, Bayes 2 system or Bayes 3 system.</p>
<p></p><ul><li><p><code>"Bayes 1"</code> reference values from 6 weeks. Alpha is fixed a
 t 0.05.</p></li>
<li><p><code>"Bayes 2"</code> reference values from 6 weeks ago and
    13 weeks of the previous year (symmetrical around the
    same week as the current one in the previous year). Alpha is fixed at 0.05.</p></li>
<li><p><code>"Bayes 3"</code>  18 reference values. 9 from the year ago
    and 9 from two years ago (also symmetrical around the
    comparable week). Alpha is fixed at 0.05.</p></li>
</ul><p>The procedure is now able to handle <code>NA</code>'s in the reference
  values. In the summation and when counting the number of observed
  reference values these are simply not counted.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="algo.call.html">algo.call</a></code>, <code><a href="algo.rki.html">algo.rkiLatestTimepoint</a></code> and <code><a href="algo.rki.html">algo.rki</a></code> for
        the RKI system.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>M. Höhle, A. Riebler, C. Lang</p>
    </div>
    <div class="section level2">
    <h2 id="source">Source<a class="anchor" aria-label="anchor" href="#source"></a></h2>
    <p>Riebler, A. (2004), Empirischer Vergleich von statistischen Methoden zur
Ausbruchserkennung bei Surveillance Daten, Bachelor's thesis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span>    <span class="va">disProg</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim.pointSource.html">sim.pointSource</a></span><span class="op">(</span>p <span class="op">=</span> <span class="fl">0.99</span>, r <span class="op">=</span> <span class="fl">0.5</span>, length <span class="op">=</span> <span class="fl">208</span>, A <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                    alpha <span class="op">=</span> <span class="fl">1</span>, beta <span class="op">=</span> <span class="fl">0</span>, phi <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                    frequency <span class="op">=</span> <span class="fl">1</span>, state <span class="op">=</span> <span class="cn">NULL</span>, K <span class="op">=</span> <span class="fl">1.7</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Test for bayes 1 the latest timepoint</span></span>
<span>    <span class="fu">algo.bayesLatestTimepoint</span><span class="op">(</span><span class="va">disProg</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Test week 200 to 208 for outbreaks with a selfdefined bayes</span></span>
<span>    <span class="fu">algo.bayes</span><span class="op">(</span><span class="va">disProg</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fl">200</span><span class="op">:</span><span class="fl">208</span>, b <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                                w <span class="op">=</span> <span class="fl">5</span>, actY <span class="op">=</span> <span class="cn">TRUE</span>,alpha<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="co"># The same for bayes 1 to bayes 3</span></span>
<span>    <span class="fu">algo.bayes1</span><span class="op">(</span><span class="va">disProg</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fl">200</span><span class="op">:</span><span class="fl">208</span>,alpha<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu">algo.bayes2</span><span class="op">(</span><span class="va">disProg</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fl">200</span><span class="op">:</span><span class="fl">208</span>,alpha<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu">algo.bayes3</span><span class="op">(</span><span class="va">disProg</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fl">200</span><span class="op">:</span><span class="fl">208</span>,alpha<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Maintained by <a href="https://www.imbe.med.fau.de/person/sebastian-meyer" class="external-link">Sebastian Meyer</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000. Hosted on <a href="https://R-forge.R-project.org/projects/surveillance/" class="external-link"><img src="https://r-forge.r-project.org/themes/rforge/imagesrf/logo.png" height="18" alt="R-Forge"></a></p>
</div>

    </footer></div>



  </body></html>

